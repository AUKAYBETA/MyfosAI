<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>‚ú® Premium AI Lounge</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --gold:#b8860b;
  --gold2:#d4af37;
  --accent:#00b09b;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif;}
body{
  background:linear-gradient(135deg,#fff,#f2f2f2);
  min-height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;
  color:#222;
}

/* ===== AUTH BOX ===== */
.auth{
  width:92%;max-width:400px;background:#fff;border-radius:16px;
  box-shadow:0 6px 30px rgba(0,0,0,0.1);
  text-align:center;padding:35px;transition:.4s;
}
.auth h1{
  font-size:26px;margin-bottom:20px;
  background:linear-gradient(90deg,var(--gold),var(--gold2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
input{
  width:90%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #ccc;
  font-size:15px;transition:.3s;
}
input:focus{border-color:var(--gold);box-shadow:0 0 6px rgba(212,175,55,.3);}
button{
  width:94%;padding:12px;border:none;border-radius:8px;color:#fff;font-weight:600;
  cursor:pointer;transition:.3s;margin-top:10px;
}
#loginBtn{background:linear-gradient(90deg,#00b09b,#96c93d);}
#signupBtn{background:linear-gradient(90deg,#ff416c,#ff4b2b);}
button:hover{transform:scale(1.03);}
.toggle{margin-top:12px;font-size:14px;color:#666;cursor:pointer;text-decoration:underline;}
#msg{margin-top:10px;font-weight:600;color:#555;}

/* ===== TERMS MODAL ===== */
.modal{
  position:fixed;top:0;left:0;width:100%;height:100%;display:none;
  justify-content:center;align-items:center;background:rgba(0,0,0,.6);z-index:999;
}
.modal-content{
  background:#fff;padding:25px;border-radius:10px;width:90%;max-width:420px;color:#333;
  text-align:left;box-shadow:0 6px 40px rgba(0,0,0,.3);
}
.modal-content h2{color:var(--gold);}
.modal-content button{
  background:var(--accent);margin-top:15px;padding:10px 18px;border-radius:6px;
}

/* ===== VIP LOUNGE ===== */
.vip{
  display:none;text-align:center;animation:fadeIn 1.2s ease;
}
.vip h1{
  font-size:32px;background:linear-gradient(90deg,var(--gold2),#ffb347);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  margin-bottom:10px;
}
.vip p{color:#555;font-size:16px;}
@keyframes fadeIn{from{opacity:0;transform:scale(.9);}to{opacity:1;transform:scale(1);}}

/* ===== HOME ===== */
.home{display:none;text-align:center;animation:fadeIn 1s ease;padding:20px;}
.title{font-size:28px;margin-bottom:20px;color:var(--gold);}
.user-info{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:15px;}
.user-avatar{
  width:48px;height:48px;border-radius:50%;object-fit:cover;
  border:2px solid var(--gold);
}
#logoutBtn{
  background:linear-gradient(90deg,#ff512f,#f09819);border:none;color:#fff;
  padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;transition:.3s;
}
#logoutBtn:hover{transform:scale(1.05);}
.grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;margin-top:20px;
}
.card{
  background:#fff;border-radius:12px;box-shadow:0 3px 20px rgba(0,0,0,0.06);
  overflow:hidden;cursor:pointer;transition:.3s;
}
.card:hover{transform:scale(1.05);}
.cover{height:120px;background-size:cover;background-position:center;}
.info{padding:12px;text-align:left;}
small{color:#777;}
</style>
</head>

<body>
<!-- ===== AUTH ===== -->
<div class="auth" id="authBox">
  <h1 id="authTitle">üîê Member Login</h1>
  <input id="username" placeholder="Username" />
  <input id="password" type="password" placeholder="Password" />
  <button id="loginBtn">Login</button>
  <button id="signupBtn" style="display:none;">Sign Up</button>
  <div class="toggle" id="toggleText">Don‚Äôt have an account? Sign up</div>
<div class="toggle" id="togglecondition">By continuing, you agree to the terms and conditions.</div>

  <div id="msg"></div>
</div>

<!-- ===== TERMS ===== -->
<div class="modal" id="termsModal">
  <div class="modal-content">
    <h2>Terms &amp; Conditions</h2>
    <p>By continuing, you confirm that you are at least 18 years old and agree to
    abide by the Premium AI Lounge policies. Any misuse, spam, or data sharing is strictly prohibited.</p>
    <button id="acceptTerms">I Agree</button>
  </div>
</div>

<!-- ===== VIP SCREEN ===== -->
<div class="vip" id="vipLounge">
  <h1>üåü Welcome to the Premium Lounge üåü</h1>
  <p>Your elite 18 + access has been verified successfully.</p>
</div>

<!-- ===== HOME / HUB ===== -->
<div class="home" id="home">
  <div class="user-info">
    <img src="data:image/jpeg;base64,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" id="avatarImg" class="user-avatar" alt="User">
    <span id="welcomeUser"></span>
    <button id="logoutBtn">Logout</button>
  </div>
  <h1 class="title">üí´ Choose Your AI Companion</h1>
  <div id="companions" class="grid"></div>
</div>
<script type="module">
import { characters } from "./characters.js";

const api = "https://script.google.com/macros/s/AKfycbxMIuK_mqp-rXNbrazkwxN-GCqPqeA9AaYuw3zDhjyPfn8kNS2gSy1ezDAZCYN6K6hFdw/exec";  // your Google Apps Script URL
const auth = document.getElementById("authBox");
const home = document.getElementById("home");
const vip = document.getElementById("vipLounge");
const msg = document.getElementById("msg");
const title = document.getElementById("authTitle");
const loginBtn = document.getElementById("loginBtn");
const signupBtn = document.getElementById("signupBtn");
const toggleText = document.getElementById("toggleText");
const grid = document.getElementById("companions");
const modal = document.getElementById("termsModal");
const accept = document.getElementById("acceptTerms");
const avatarImg = document.getElementById("avatarImg");
const welcomeUser = document.getElementById("welcomeUser");
const logoutBtn = document.getElementById("logoutBtn");

let mode = "login";
let termsAccepted = false;
let verifiedAdult = false;

toggleText.onclick = () => {
  if (mode === "login") {
    mode = "signup";
    title.textContent = "üöÄ Create Premium Account";
    loginBtn.style.display = "none";
    signupBtn.style.display = "block";
    toggleText.textContent = "Already a member? Login";
  } else {
    mode = "login";
    title.textContent = "üîê Member Login";
    signupBtn.style.display = "none";
    loginBtn.style.display = "block";
    toggleText.textContent = "Don‚Äôt have an account? Sign up";
  }
  msg.textContent = "";
};

// ‚úÖ Age check modal before signup
signupBtn.onclick = () => {
  if (!termsAccepted) {
    modal.style.display = "flex";
  } else if (!verifiedAdult) {
    const confirm18 = confirm("‚ö†Ô∏è This site contains 18+ premium AI experiences. Are you 18 years or older?");
    if (confirm18) {
      verifiedAdult = true;
      doSignup();
    } else {
      alert("‚ùå You must be 18+ to access the Premium Lounge.");
    }
  } else {
    doSignup();
  }
};

accept.onclick = () => {
  termsAccepted = true;
  modal.style.display = "none";
  const confirm18 = confirm("‚ö†Ô∏è Please confirm you are 18+ to continue.");
  if (confirm18) {
    verifiedAdult = true;
    doSignup();
  } else {
    alert("Signup cancelled ‚Äî you must be 18+ to proceed.");
  }
};

async function getIP() {
  try {
    const r = await fetch("https://api.ipify.org?format=json");
    return (await r.json()).ip;
  } catch {
    return "unknown";
  }
}

async function doSignup() {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  if (!username || !password) {
    msg.textContent = "‚ùå Please fill all fields.";
    return;
  }

  msg.textContent = "‚è≥ Creating account...";
  const ip = await getIP();
  const res = await fetch(api, {
    method: "POST",
    body: JSON.stringify({ action: "signup", username, password, ip }),
  });
  const data = await res.json();
  alert(data.message);
  if (data.success) switchToLogin();
}

function switchToLogin() {
  mode = "login";
  signupBtn.style.display = "none";
  loginBtn.style.display = "block";
  title.textContent = "üîê Member Login";
  toggleText.textContent = "Don‚Äôt have an account? Sign up";
}

// ‚úÖ Proper login ‚Üí hides auth box completely
loginBtn.onclick = async () => {
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  if (!username || !password) {
    msg.textContent = "‚ùå Please fill all fields.";
    return;
  }

  msg.textContent = "‚è≥ Verifying...";
  const res = await fetch(api, {
    method: "POST",
    body: JSON.stringify({ action: "login", username, password }),
  });
  const data = await res.json();

  if (data.success) {
    localStorage.setItem("user", username);
    alert("‚úÖ Welcome " + username + "! Enjoy your Premium Lounge access.");
    auth.style.display = "none";  // üî• hides login box fully
    enterVIP(username);
  } else {
    alert(data.message);
  }
};

function enterVIP(username) {
  vip.style.display = "block";
  setTimeout(() => {
    vip.style.display = "none";
    showHome(username);
  }, 2500);
}

function showHome(username) {
  home.style.display = "block";
  welcomeUser.textContent = "Welcome " + username;
  grid.innerHTML = "";
  characters.forEach((c) => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class='cover' style='background-image:url(${c.introImage})'></div>
      <div class='info'>
        <h3>${c.name}</h3>
        <p>${c.role}</p>
        <small>${c.tagline}</small>
      </div>`;
    card.onclick = () => {
      localStorage.setItem("activeCharacter", JSON.stringify(c));
      window.location.href = "chat.html";
    };
    grid.appendChild(card);
  });
}

logoutBtn.onclick = () => {
  localStorage.removeItem("user");
  location.reload();
};

// ‚úÖ Auto-login hidden until after full auth
if (localStorage.getItem("user")) {
  const u = localStorage.getItem("user");
  auth.style.display = "none";
  showHome(u);
}
</script>

</body>
</html>

